<!DOCTYPE html>
<html style="overflow:hidden;">


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Playlist.Zone</title>


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88352123-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-88352123-1');
    </script>


    <environment names="Development">
        <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

        <link rel="stylesheet" href="~/css/site.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/account/account.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/charts/charts.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/home/home.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/player/player.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/playlist/playlist.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/search/search.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />
        <link rel="stylesheet" href="~/css/shared/shared.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" />

        <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    </environment>
    <environment names="Staging,Production">
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

        <!-- HERE 01928029380921i0w9i22 -->
        <link rel="stylesheet" href="~/css/site.min.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/account/account.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/charts/charts.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/home/home.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/player/player.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/playlist/playlist.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/search/search.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/shared/shared.css?cb=@Compiler.Web.Playlist.Zone.Code.PlaylistRoot.CacheControl" asp-append-version="true" />
        <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    </environment>


</head>



<body style="overflow:hidden;">
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">

            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <div style="padding:12px 10px 12px 10px;">
                    <a class="mmHome" style="cursor:pointer; color:#FFFFFF; font-size:18px; ">Playlist.Zone</a>
                </div>
            </div>

            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a class="mmSearch" style="cursor:pointer;">Search</a></li>
                    <li><a class="mmCharts" style="cursor:pointer;">Charts</a></li>
                    <li><a class="mmPlaylists" style="cursor:pointer;">Playlists</a></li>
                    <li><a class="mmTags" style="cursor:pointer;">Tags</a></li>
                </ul>







                <div style="float:right; margin:23px 0 0 0;">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <a class="mmAccount" href="#" style="float:right; color:#ffffff; cursor:pointer;">Account</a>
                        <a href="#" style="float:right; color:#ffffff; cursor:pointer; padding:0 8px 0 8px;">|</a>
                        <a class="mmSignOut" href="#" style="float:right; color:#ffffff; cursor:pointer;">Sign Out</a>
                    }
                    else
                    {   
                        <a class="mmLogin" href="/Account/Login" style="float:right; color:#ffffff; cursor:pointer;">Login</a>
                        <a href="#" style="float:right; color:#ffffff; cursor:pointer; padding:0 8px 0 8px;">|</a>
                        <a class="mmRegister" href="/Account/Register" style="float:right; color:#ffffff; cursor:pointer;">Register</a>
                    }
                </div>

            </div>
        </div>


        <div class="container" style="width:100%; background-color:#808080; border-radius:3px;">
            <input type="text" id="SearchBarTxt" title="Search..." placeholder="Search..." value="" />
        </div> 


    </nav>


    <div class="container body-content" style="margin:20px 0 0 0;">


        <div id="SearchResultsCh" class="main-content" style=" margin:23px 0 0 0; overflow:auto;">
            @RenderBody()
        </div>








        <!-- player -->
        <div class="player-mch">

            <div style="float:left; width:100%; height:28px; background-color:#cdcdcd; padding:3px;">

                <div class="player-ttl" style="float:left; width:80%; height:28px; font-weight:600; font-size:16px; padding-left:10px; cursor:pointer; overflow:hidden;">
                </div>

                <div style="float:right; width:20%;">
                    <div class="close-btn main-back" style="float:right; cursor:pointer; padding:0 6px 0 6px; color:#FFFFFF;">X</div>
                    <div class="minimize-btn main-back" style="float:right; cursor:pointer; padding:0 6px 0 6px; color:#FFFFFF; margin:0 5px 0 0;">-</div>
                </div>
            </div>


            <div style="float:left; width:100%;">


                <div id="playerCH1" style="float:left; width:380px;">

                    <div class="player-controls" style="float:left; width:100%; height:33px; line-height:33px; margin-top:5px;">
                        <div class="plr-btn plr-btn-prev">prev</div>
                        <div class="plr-btn plr-btn-play">pause</div>
                        <div class="plr-btn plr-btn-next">next</div>
                        <div class="plr-btn plr-btn-shuffle">SHFL</div>
                    </div>

                    <div class="player-name" style="float:left; width:100%;"></div>

                    <div id="player" class="main-back" style="border:3px solid #064459; width:400px; height:250px;"></div>
                </div>


                <div class="player-content" style="float:left; width:260px; height:290px; overflow:hidden; margin:5px 0 0 5px; ">
                </div>

            </div>

        </div>
        <!-- player -->
        
    
        <!--
        <div style="position:absolute; top:120px; left:20px; width:200px; height:100px; background-color:#808080;">
            <div>REACT TEST</div>
            <div class="like_button_container" data-commentid="5"></div>
            <div class="like_button_container" data-commentid="2"></div>
            <div class="like_button_container" data-commentid="7"></div>
        </div>
        -->


    </div>





    @Html.Partial("/Views/Shared/_Lightbox.cshtml")


<environment names="Development">
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>

    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/player.js" asp-append-version="true"></script>

    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>

    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Load our React component. -->
    <script src="~/Components/like_button_comp.js" type="text/babel"></script>
</environment>


<environment names="Staging,Production">
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"
            asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
            asp-fallback-test="window.jQuery"
            crossorigin="anonymous"
            integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
    </script>
    <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js"
            asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
            asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
            crossorigin="anonymous"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
    </script>

    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/player.js" asp-append-version="true"></script>


    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="https://unpkg.com/react@16/umd/react.production.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.js" crossorigin></script>

    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Load our React component. -->
    <script src="~/Components/like_button_comp.js" type="text/babel"></script>
</environment>

    @RenderSection("Scripts", required: false)






    <script>

        $(document).ready(function () {

            


            $("#SearchBarTxt").on("keyup", function (event) {
                var keyVal = $("#SearchBarTxt").val()
                if (event.keyCode == 13) {
                    
                    StartSearch(keyVal);
                }
            });



            StartSearch = function (keyVal) {
                PreloaderOn("#SearchResultsCh");
                
                $.get("/Search/Keyword/" + keyVal, function (data) {

                    $("#SearchResultsCh").html(data);
                });
            }


            
            if (window.location.hash.length > 0) {

                //parse hash
                var hashStr = window.location.hash.replace("#", "/");
                
                PreloaderOn(".main-content");
                $.get(hashStr, function (data) {
                    $(".main-content").html(data);
                    PreloaderOff();
                });

            }
            else {
                PreloaderOn(".main-content");
                $.get("/Home/Start", function (data) {
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            }





            //!!!menu
            $(".mmHome").on("click", function () {
                
                $(".navbar-collapse").removeClass("in");

                PreloaderOn(".main-content");
                $.get('/Home/Start', function (data) {

                    window.location.hash = "";
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            });


            //!!!menu
            $(".mmSearch").on("click", function () {

                $(".navbar-collapse").removeClass("in");

                PreloaderOn(".main-content");
                $.get('/Search/Index', function (data) {

                    window.location.hash = "search";
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            });

            //!!!menu
            $(".mmCharts").on("click", function () {

                $(".navbar-collapse").removeClass("in");

                PreloaderOn(".main-content");
                $.get('/Charts/Index', function (data) {

                    window.location.hash = "charts";
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            });



            //!!!menu
            $(".mmPlaylists").on("click", function () {

                $(".navbar-collapse").removeClass("in");

                PreloaderOn(".main-content");

                $.ajax({
                    type: "GET",
                    url: '/Playlists/Index',
                    contentType: "application/html; charset=utf-8",
                    data: {},
                    timeout: 1000,
                    dataType: "html",
                    success: function (result) { 
                        window.location.hash = "playlists";
                        $(".main-content").html(result);
                        PreloaderOff();
                     },
                    error: function (result) { ProccessErrorReq(result); }
                });
                
            });


            //!!!menu
            $(".mmTags").on("click", function () {

                $(".navbar-collapse").removeClass("in");

                PreloaderOn(".main-content");
                $.get('/Tags/Index', function (data) {

                    window.location.hash = "tags";
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            });
            

            //!!!menu
            $(".mmAccount").on("click", function () {

                $(".navbar-collapse").removeClass("in");

                $.get('/Account/Info', function (data) {

                    window.location.hash = "account";
                    $(".main-content").html(data);
                    PreloaderOff();
                });
            }); 


            //!!!menu
            $(".mmSignOut").on("click", function () {
                window.location = "/Account/SignOut";
            });






            //-------------------------------------------------------------------------
            
            $(document).scroll(function () {
                var TopOffset = ($(this).scrollTop() + $(window).height() - $(".player-mch").height() - 30);
                var LeftOffset = ( $(window).width() - $(".player-mch").width() - 50);
                
                $(".player-mch").css("top", TopOffset + "px");
                $(".player-mch").css("left", LeftOffset + "px");
            });
            

            //!!!player
            $(".player-mch .close-btn").on("click", function () {
                ClosePlayer();
            });
            

            //!!!player
            $(".player-mch .minimize-btn").on("click", function () {

                if ($(this).text() == "-") {

                    $(this).text("+");
                    $(".player-mch .player-content").css("display", "none");
                    $(".player-mch").css("width", "320px");
                    $(".player-mch").css("height", "280px");

                    $("#playerCH1").css("width", "300px");

                    $("#player").css("width", "300px");
                    $("#player").css("height", "200px");

                    
                    var TopOffset  = ($(document).scrollTop() + $(window).height() - $(".player-mch").height() - 40);
                    var LeftOffset = ($(window).width() - $(".player-mch").width() - 50);
                    $(".player-mch").css("top", TopOffset + "px");
                    $(".player-mch").css("left", LeftOffset + "px");
                }
                else {
                    $(this).text("-");

                    $("#playerCH1").css("width", "360px");

                    $("#player").css("width", "360px");
                    $("#player").css("height", "260px");

                    $(".player-mch .player-content").css("display", "block");
                    $(".player-mch").css("width", "650px");
                    $(".player-mch").css("height", "340px");


                    var TopOffset  = ($(document).scrollTop() + $(window).height() - $(".player-mch").height() - 40);
                    var LeftOffset = ( $(window).width() - $(".player-mch").width() - 50);
                    $(".player-mch").css("top", TopOffset + "px");
                    $(".player-mch").css("left", LeftOffset + "px");
                }

                

            });
            //-------------------------------------------------------------------------



            $(".plr-btn-next").on("click", function () {
                playNext();
            });

            $(".plr-btn-prev").on("click", function () {
                playPrev();
            });

            $(".plr-btn-play").on("click", function () {
                pauseVideo();
            });

            $(".plr-btn-shuffle").on("click", function () {
                shufflePlaylist();
            });


            
            WindowResize();

        });



        $(window).resize(function () {
            WindowResize();
        });


        function WindowResize() {

            //!!!!- settting
            $(".player-mch").css("top", ($(window).height() - $(".player-mch").height() - 35) + "px");
            $(".player-mch").css("left", ($(window).width() - $(".player-mch").width() - 50) + "px");
            //!!!! settings
            $(".main-content").css("height", ($(window).height() - 85) + "px");

            //determine if player is big
            var isBig = true;
            if ($(".player-mch").width() > 500) {
                isBig = true;
            }
            else {
                isBig = false;
            }

            //if player is big - then check if window is became small to shring player
            if (isBig) {
                if ($(window).width() < 600) {
                    $(".player-mch .minimize-btn").text("-");
                    $(".player-mch .minimize-btn").trigger("click");
                }
                else {
                    $(".player-mch .minimize-btn").text("+");
                    $(".player-mch .minimize-btn").trigger("click");
                }
            }
        }

    </script>






    <!-- PLAYER SCRIPTS -->
    <script>
        

        var CURR_SONG = "";
        var CURR_STATUS = "";

        // 2. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        

        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubeIframeAPIReady() {
            
            player = new YT.Player('player', {
                height: '330',
                width: '540',
                videoId: '',
                playerVars: { 'autoplay': 0, 'controls': 0 },
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
        }


          // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
          }


        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        function onPlayerStateChange(event) {

            //console.log("event.data -->" + event.data);
            if (event.data == 0) {
                playNext();
            }

            if (event.data == YT.PlayerState.PLAYING && !done) {
                //setTimeout(stopVideo, 6000);
                done = true;
            }
        }


        function stopVideo() {
            player.stopVideo();
            CURR_STATUS = "STOP";
        }

        function pauseVideo() {
            if (CURR_STATUS == "PLAY") {
                $(".plr-btn-play").html("play");
                player.pauseVideo();
                CURR_STATUS = "PAUSE";
            }
            else {
                $(".plr-btn-play").html("pause");
                player.playVideo();
                CURR_STATUS = "PLAY";
            }
        }


        function playSong(song_id, song_guid) {
            CURR_SONG = song_id;
            player.loadVideoById(song_guid, 0, 100);
            CURR_STATUS = "PLAY";
        }


        //try to call child if applicable
        function playNext() {
            try {
                playNextSong();
            }
            catch (ex){
                console.log(ex);
            }
        }


        //try to call child if applicable
        function playPrev() {
            try {
                playPrevSong();
            }
            catch (ex) {
                console.log(ex);
            }
        }



        function shufflePlaylist() {


            var plstItems = new Array();

            $(".plst-Itm").each(function () {
                plstItems.push($(this).clone());
            });


            var newPlstItems = shuffle(plstItems);

            $(".plst-Itm").off();
            $(".pls-controller").html("");
            for (i = 0; i < newPlstItems.length; i++) {
                $(".pls-controller").append(newPlstItems[i]);
            }

            $(".plst-Itm").on("click", function () {
                OnSongClick($(this));
            });


        }

        function shuffle(a) {
            var j, x, i;
            for (i = a.length - 1; i > 0; i--) {
                j = Math.floor(Math.random() * (i + 1));
                x = a[i];
                a[i] = a[j];
                a[j] = x;
            }
            return a;
        }


        function OnSongClick(object) {
            playSong($(object).attr("data-id"), $(object).attr("data-song"));
            $(".plst-Itm").css("background-color", "#dedede");
            $(object).css("background-color", "#59caf1");
        }





      $(document).ready(function () {
          
          $(".plst-Itm").click(function () {
              playSong($(this).attr("data-id"), $(this).attr("data-song"));

              $(".plst-Itm").css("background-color", "#dedede");
              $(this).css("background-color", "#59caf1");
          });

          $(".player-mch").draggable();
      });
     
    </script>


</body>
</html>
